"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[657],{2657:(I,d,r)=>{r.r(d),r.d(d,{default:()=>M});var c=r(177),h=r(6661),m=r(2389),t=r(3953),_=r(2646),g=r(7004),u=r(3413);const f=["chart"],p=a=>({"d-none":a});function v(a,i){if(1&a&&(t.j41(0,"div",5)(1,"app-card",14)(2,"h6",15),t.EFF(3),t.k0s(),t.j41(4,"h2",16),t.nrm(5,"i"),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"p",17),t.EFF(9),t.j41(10,"span",18),t.EFF(11),t.k0s()()()()),2&a){const e=i.$implicit;t.R7$(),t.Mz_("cardClass","",e.background," order-card"),t.Y8G("hidHeader",!0),t.R7$(2),t.JRh(e.title),t.R7$(2),t.ZvI("feather ",e.icon," float-start"),t.R7$(2),t.JRh(e.number),t.R7$(2),t.SpI(" ",e.text," "),t.R7$(2),t.JRh(e.no)}}function D(a,i){if(1&a&&(t.j41(0,"li",21)(1,"h6"),t.EFF(2),t.j41(3,"small",22),t.EFF(4),t.nI1(5,"date"),t.k0s()(),t.j41(6,"p",23),t.EFF(7),t.nI1(8,"currency"),t.k0s()()),2&a){const e=i.$implicit;t.Y8G("ngClass",t.eq3(10,p,i.index>=5)),t.R7$(2),t.SpI(" ",e.rem," "),t.R7$(2),t.SpI("Date : ",t.i5U(5,4,e.cdate,"MM-dd-yyyy"),""),t.R7$(3),t.SpI(" Amount : ",t.i5U(8,7,e.amount,"PHP")," ")}}function E(a,i){if(1&a&&(t.qex(0),t.j41(1,"ul",19),t.DNE(2,D,9,12,"li",20),t.k0s(),t.bVm()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.expensesData)}}function O(a,i){1&a&&(t.j41(0,"p",24),t.EFF(1,"No Data"),t.k0s())}function y(a,i){if(1&a&&(t.j41(0,"li",21)(1,"h6"),t.EFF(2),t.j41(3,"small",22),t.EFF(4),t.nI1(5,"date"),t.k0s()(),t.j41(6,"p",23),t.EFF(7),t.nI1(8,"currency"),t.k0s()()),2&a){const e=i.$implicit;t.Y8G("ngClass",t.eq3(10,p,i.index>=5)),t.R7$(2),t.SpI(" ",e.salescust," "),t.R7$(2),t.SpI("Date : ",t.i5U(5,4,e.salesdate,"MM-dd-yyyy"),""),t.R7$(3),t.SpI(" Balance : ",t.i5U(8,7,e.tenderbalance,"PHP")," ")}}function x(a,i){if(1&a&&(t.qex(0),t.j41(1,"ul",19),t.DNE(2,y,9,12,"li",20),t.k0s(),t.bVm()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.unpaidsData)}}function C(a,i){1&a&&(t.j41(0,"p",24),t.EFF(1,"No Data"),t.k0s())}function F(a,i){if(1&a&&(t.j41(0,"li",21)(1,"h6"),t.EFF(2),t.j41(3,"small",22),t.EFF(4),t.nI1(5,"date"),t.k0s()(),t.j41(6,"p",23),t.EFF(7),t.nI1(8,"currency"),t.k0s()()),2&a){const e=i.$implicit;t.Y8G("ngClass",t.eq3(10,p,i.index>=5)),t.R7$(2),t.SpI(" ",e.cpcustname," "),t.R7$(2),t.SpI("Date : ",t.i5U(5,4,e.cppaydate,"MM-dd-yyyy"),""),t.R7$(3),t.SpI(" Amount : ",t.i5U(8,7,e.cppay,"PHP")," ")}}function b(a,i){if(1&a&&(t.qex(0),t.j41(1,"ul",19),t.DNE(2,F,9,12,"li",20),t.k0s(),t.bVm()),2&a){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.paidsData)}}function P(a,i){1&a&&(t.j41(0,"p",24),t.EFF(1,"No Data"),t.k0s())}let M=(()=>{class a{constructor(e,s,n){this.salesCartService=e,this.salesService=s,this.currencyPipe=n,this.expensesData=[],this.unpaidsData=[],this.paidsData=[],this.cards=[{background:"bg-c-blue",title:"Transactions",icon:"icon-shopping-cart",text:"This Month",number:"",no:""},{background:"bg-c-green",title:"Total Sales",icon:"icon-tag",text:"This Month",number:"",no:""},{background:"bg-c-yellow",title:"Item Sold",icon:"icon-repeat",text:"This Month",number:"",no:""}],this.chartOptions={chart:{type:"line",height:350,animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},series:[{name:"Sales",data:[]}],xaxis:{type:"category",categories:[],labels:{formatter:o=>o}},tooltip:{x:{format:"dd MMM yyyy"}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},colors:["#1E88E5"],markers:{size:4},yaxis:{title:{text:"Total Sales (PHP)"}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,100]}}}}ngOnInit(){const e=this.getFormattedDate();this.loadOverviewData(e),this.loadSalesChartData(e),this.loadExpenseData(e),this.loadUnpaids(e),this.loadPaids(e)}getFormattedDate(){return(new Date).toISOString().split("T")[0]}loadOverviewData(e){this.salesCartService.getOverview(e).subscribe(s=>{if(s&&s.length>0){const n=s[0];this.cards[0].number=n.today,this.cards[0].no=n.month,this.cards[1].number=this.currencyPipe.transform(n.sales,"PHP")||"",this.cards[1].no=this.currencyPipe.transform(n.salesmonth,"PHP")||"",this.cards[2].number=n.salesqty,this.cards[2].no=n.salesqtymonth}else console.log("No data found or data format is unexpected")})}loadSalesChartData(e){this.salesCartService.getSalesMonth(e).subscribe(s=>{if(s&&s.length>0){const n=s.map(o=>({total:o.total,cdate:new Date(o.cdate)}));this.chartOptions.series=[{name:"Sales",data:n.map(o=>o.total)}],this.chartOptions.xaxis.categories=n.map(o=>{const l=o.cdate;return`${l.getMonth()+1}-${l.getDate()}-${l.getFullYear()}`}),this.chart&&(this.chart.updateSeries(this.chartOptions.series),this.chart.updateOptions(this.chartOptions))}else console.log("No data found or data format is unexpected")})}loadExpenseData(e){this.salesCartService.getExpenses(e).subscribe(s=>{this.expensesData=s})}loadUnpaids(e){this.salesService.getUnpaids(e).subscribe(s=>{this.unpaidsData=s})}loadPaids(e){this.salesService.getPaids(e).subscribe(s=>{this.paidsData=s})}static#t=this.\u0275fac=function(s){return new(s||a)(t.rXU(_.J),t.rXU(g.j),t.rXU(c.oe))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-overview"]],viewQuery:function(s,n){if(1&s&&t.GBs(f,5),2&s){let o;t.mGM(o=t.lsd())&&(n.chart=o.first)}},standalone:!0,features:[t.Jv_([c.oe]),t.aNF],decls:23,vars:19,consts:[["chart",""],["noExpensesData",""],["noUnpaidsData",""],["noPaidsData",""],[1,"row","justify-content-center"],[1,"col","mb-4"],["cardTitle","Monthly Sales",3,"options"],[3,"chart","dataLabels","stroke","series","xaxis","colors","fill","markers","yaxis"],[1,"row"],[1,"col-12","col-sm-4","mb-3"],["cardTitle","This Month Expenses","blockClass","m-t-10",3,"options"],[4,"ngIf","ngIfElse"],["cardTitle","This Month Unpaid Sales","blockClass","m-t-5",3,"options"],["cardTitle","This Month Paid Credits","blockClass","m-t-5",3,"options"],[3,"hidHeader","cardClass"],[1,"text-white"],[1,"text-end","text-white"],[1,"m-b-0"],[1,"float-end"],[1,"feed-blog","ps-0","overflow-scroll"],["class","active-feed custom-margin",3,"ngClass",4,"ngFor","ngForOf"],[1,"active-feed","custom-margin",3,"ngClass"],[1,"text-muted","ms-1"],[1,"custom-margin"],[1,"text-center","text-muted"]],template:function(s,n){if(1&s&&(t.j41(0,"div",4),t.Z7z(1,v,12,10,"div",5,t.fX1),t.k0s(),t.j41(3,"div")(4,"app-card",6),t.nrm(5,"apx-chart",7,0),t.k0s()(),t.j41(7,"div",8)(8,"div",9)(9,"app-card",10),t.DNE(10,E,3,1,"ng-container",11)(11,O,2,0,"ng-template",null,1,t.C5r),t.k0s()(),t.j41(13,"div",9)(14,"app-card",12),t.DNE(15,x,3,1,"ng-container",11)(16,C,2,0,"ng-template",null,2,t.C5r),t.k0s()(),t.j41(18,"div",9)(19,"app-card",13),t.DNE(20,b,3,1,"ng-container",11)(21,P,2,0,"ng-template",null,3,t.C5r),t.k0s()()()),2&s){const o=t.sdS(12),l=t.sdS(17),R=t.sdS(22);t.R7$(),t.Dyx(n.cards),t.R7$(3),t.Y8G("options",!1),t.R7$(),t.Y8G("chart",n.chartOptions.chart)("dataLabels",n.chartOptions.dataLabels)("stroke",n.chartOptions.stroke)("series",n.chartOptions.series)("xaxis",n.chartOptions.xaxis)("colors",n.chartOptions.colors)("fill",n.chartOptions.fill)("markers",n.chartOptions.markers)("yaxis",n.chartOptions.yaxis),t.R7$(4),t.Y8G("options",!1),t.R7$(),t.Y8G("ngIf",n.expensesData.length>0)("ngIfElse",o),t.R7$(4),t.Y8G("options",!1),t.R7$(),t.Y8G("ngIf",n.unpaidsData.length>0)("ngIfElse",l),t.R7$(4),t.Y8G("options",!1),t.R7$(),t.Y8G("ngIf",n.paidsData.length>0)("ngIfElse",R)}},dependencies:[m.G,c.YU,c.Sq,c.bT,u.i,c.oe,c.vh,h.J,h.Q],styles:[".feed-blog[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.custom-margin[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px}.active-feed[_ngcontent-%COMP%]{padding:.5rem}"]})}return a})()}}]);