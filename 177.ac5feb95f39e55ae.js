"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[177],{3177:(D,c,a)=>{a.r(c),a.d(c,{default:()=>v});var g=a(177),p=a(2389),t=a(3953),d=a(129),r=a(4341),h=a(3413);function y(n,l){1&n&&(t.j41(0,"div",5)(1,"div",6)(2,"p"),t.EFF(3,"Loading..."),t.k0s()()())}function _(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"label",9),t.EFF(3,"Start Date:"),t.k0s(),t.j41(4,"input",10),t.mxI("ngModelChange",function(s){t.eBV(e);const i=t.XpG();return t.DH7(i.startDate,s)||(i.startDate=s),t.Njj(s)}),t.bIt("change",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.applyDateFilter())}),t.k0s()(),t.j41(5,"div",8)(6,"label",11),t.EFF(7,"End Date:"),t.k0s(),t.j41(8,"input",12),t.mxI("ngModelChange",function(s){t.eBV(e);const i=t.XpG();return t.DH7(i.endDate,s)||(i.endDate=s),t.Njj(s)}),t.bIt("change",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.applyDateFilter())}),t.k0s()(),t.j41(9,"div",13)(10,"button",14),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.showAllTransactions())}),t.EFF(11,"Show All"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.R50("ngModel",e.startDate),t.R7$(4),t.R50("ngModel",e.endDate)}}function P(n,l){1&n&&(t.j41(0,"div"),t.EFF(1,"No Petty Cash Logs available"),t.k0s())}function f(n,l){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"currency"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s()()),2&n){const e=l.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.pettylogdate)),t.R7$(2),t.JRh(t.i5U(5,6,e.pettylogamount,"PHP")),t.R7$(3),t.JRh(t.i5U(8,9,e.pettyorigamount,"PHP")),t.R7$(3),t.JRh(e.pettylogtype),t.R7$(2),t.JRh(e.pettylogby),t.R7$(2),t.JRh(e.pettylogremarks)}}function u(n,l){if(1&n&&(t.j41(0,"div",24)(1,"span"),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&n){const e=l.$implicit;t.R7$(2),t.SpI("Current Petty Cash : ",t.brH(3,1,e.pettyamount,"PHP",!0),"")}}function m(n,l){if(1&n&&(t.j41(0,"table",19)(1,"thead")(2,"tr",20)(3,"th"),t.EFF(4,"Date"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Input Amount"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Petty Cash Amount"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Action"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Cashier"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Remarks"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,f,15,12,"tr",21),t.k0s(),t.j41(17,"tfoot")(18,"tr",20)(19,"td",22),t.DNE(20,u,4,5,"div",23),t.k0s()()()()),2&n){const e=t.XpG(2);t.R7$(16),t.Y8G("ngForOf",e.displayedpettylogs),t.R7$(4),t.Y8G("ngForOf",e.pettycash)}}function C(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"button",26),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.goToPage(s.pettylogsCurrentPage-1))}),t.EFF(2,"Previous"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.j41(5,"button",26),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.goToPage(s.pettylogsCurrentPage+1))}),t.EFF(6,"Next"),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",1===e.pettylogsCurrentPage),t.R7$(3),t.Lme("Page ",e.pettylogsCurrentPage," of ",e.pettylogsTotalPages,""),t.R7$(),t.Y8G("disabled",e.pettylogsCurrentPage===e.pettylogsTotalPages)}}function b(n,l){if(1&n&&(t.j41(0,"div",15),t.DNE(1,P,2,0,"div",16)(2,m,21,2,"table",17)(3,C,7,4,"div",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.noPettylogs),t.R7$(),t.Y8G("ngIf",!e.noPettylogs),t.R7$(),t.Y8G("ngIf",!e.noPettylogs)}}let v=(()=>{class n{constructor(e,o){this.pettycashService=e,this.datePipe=o,this.pettylogs=[],this.pettycash=[],this.displayedpettylogs=[],this.filteredpettylogs=[],this.pettylogsCurrentPage=1,this.pettylogsPageSize=10,this.pettylogsTotalPages=1,this.noPettylogs=!1,this.loading=!1,this.startDate="",this.endDate=""}ngOnInit(){this.fetchPettyLogs().then(()=>{const e=new Date;this.startDate=this.formatDate(e),this.endDate=this.formatDate(e),this.applyDateFilter()}),this.getPettyCash()}formatDate(e){return this.datePipe.transform(e,"yyyy-MM-dd")||""}fetchPettyLogs(){return this.loading=!0,new Promise((e,o)=>{this.pettycashService.getPettyLogs().subscribe(s=>{this.pettylogs=s,this.pettylogsTotalPages=Math.ceil(this.pettylogs.length/this.pettylogsPageSize),this.pettylogsCurrentPage=1,this.noPettylogs=0===this.pettylogs.length,this.updatePettylogsDisplayed(),this.loading=!1,e()},s=>{this.noPettylogs=!0,this.loading=!1,console.error("Error fetching Petty logs",s),o(s)})})}updatePettylogsDisplayed(){const e=(this.pettylogsCurrentPage-1)*this.pettylogsPageSize;this.displayedpettylogs=this.filteredpettylogs.slice(e,e+this.pettylogsPageSize)}goToPage(e){e>=1&&e<=this.pettylogsTotalPages&&(this.pettylogsCurrentPage=e,this.updatePettylogsDisplayed())}applyDateFilter(){if(this.startDate&&this.endDate){const e=new Date(this.startDate),o=new Date(this.endDate);this.filteredpettylogs=this.pettylogs.filter(s=>{const i=new Date(s.pettylogdate);return i>=e&&i<=o})}else this.filteredpettylogs=this.pettylogs;this.noPettylogs=0===this.filteredpettylogs.length,this.pettylogsTotalPages=Math.ceil(this.filteredpettylogs.length/this.pettylogsPageSize),this.pettylogsCurrentPage=1,this.updatePettylogsDisplayed()}getPettyCash(){return new Promise((e,o)=>{this.pettycashService.getPettyCash().subscribe(s=>{this.pettycash=s,e()},s=>{console.error("Error fetching Petty Cash",s),o(s)})})}showAllTransactions(){this.startDate="",this.endDate="",this.filteredpettylogs=this.pettylogs,this.noPettylogs=0===this.filteredpettylogs.length,this.pettylogsTotalPages=Math.ceil(this.filteredpettylogs.length/this.pettylogsPageSize),this.pettylogsCurrentPage=1,this.updatePettylogsDisplayed()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(d.s),t.rXU(g.vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-pettycashlogs"]],standalone:!0,features:[t.Jv_([g.vh]),t.aNF],decls:5,vars:4,consts:[[1,"col-xl-12"],["cardTitle","Petty Cash Logs","blockClass","table-border-style",3,"options"],["class","loading-overlay",4,"ngIf"],["class","row mb-3 align-items-end",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"row","mb-3","align-items-end"],[1,"col-12","col-md-4"],["for","startDate",1,"form-label"],["type","date","id","startDate",1,"form-control",3,"ngModelChange","change","ngModel"],["for","endDate",1,"form-label"],["type","date","id","endDate",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-12","col-md-4","text-end"],[1,"btn","btn-secondary","mt-3","mt-md-0",3,"click"],[1,"table-responsive"],[4,"ngIf"],["class","table table-styling",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],[1,"table","table-styling"],[1,"table-primary"],[4,"ngFor","ngForOf"],["colspan","8"],["class","d-flex justify-content-between",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"btn","btn-dark",3,"click","disabled"]],template:function(o,s){1&o&&(t.j41(0,"div",0)(1,"app-card",1),t.DNE(2,y,4,0,"div",2)(3,_,12,2,"div",3)(4,b,4,3,"div",4),t.k0s()()),2&o&&(t.R7$(),t.Y8G("options",!1),t.R7$(),t.Y8G("ngIf",s.loading),t.R7$(),t.Y8G("ngIf",!s.loading),t.R7$(),t.Y8G("ngIf",!s.loading))},dependencies:[p.G,g.Sq,g.bT,r.me,r.BC,r.vS,h.i,g.oe],styles:[".table-styling[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-styling[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s}.table-styling[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.table-styling[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d8eef1f4;cursor:pointer}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1000}.loading-spinner[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#333}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return n})()}}]);