"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[895],{4895:(S,p,i)=>{i.r(p),i.d(p,{default:()=>C});var m=i(2389);class l extends Error{}function c(t,s){if("string"!=typeof t)throw new l("Invalid token specified: must be a string");s||(s={});const n=!0===s.header?0:1,a=t.split(".")[n];if("string"!=typeof a)throw new l(`Invalid token specified: missing part #${n+1}`);let r;try{r=function h(t){let s=t.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function u(t){return decodeURIComponent(atob(t).replace(/(.)/g,(s,n)=>{let a=n.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}(s)}catch{return atob(s)}}(a)}catch(d){throw new l(`Invalid token specified: invalid base64 for part #${n+1} (${d.message})`)}try{return JSON.parse(r)}catch(d){throw new l(`Invalid token specified: invalid json for part #${n+1} (${d.message})`)}}l.prototype.name="InvalidTokenError";var e=i(3953),f=i(6695),b=i(3536),v=i(177),g=i(4341);function I(t,s){1&t&&e.nrm(0,"span",21)}function k(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"LOGIN"),e.k0s())}function w(t,s){if(1&t&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.JRh(n.errorMessage)}}let C=(()=>{class t{constructor(n,a){this.userService=n,this.router=a,this.usern="",this.passw="",this.errorMessage="",this.loading=!1}onLogin(){this.loading=!0,this.userService.login(this.usern,this.passw,"web").subscribe(n=>{this.loading=!1;const a=c(n.token),r=c(n.token),d=n.user.empname,o=c(n.token);localStorage.setItem("token",n.token),localStorage.setItem("usern",a.usern),localStorage.setItem("displayName",d),localStorage.setItem("devID",r.devid),localStorage.setItem("compname",o.contnum),this.router.navigate(["/overview"])},n=>{this.loading=!1,this.errorMessage="Invalid username or password"})}static#e=this.\u0275fac=function(a){return new(a||t)(e.rXU(f.k),e.rXU(b.Ix))};static#n=this.\u0275cmp=e.VBU({type:t,selectors:[["app-sign-in"]],standalone:!0,features:[e.aNF],decls:22,vars:8,consts:[[1,"auth-wrapper"],[1,"auth-content"],[1,"card"],[1,"row","align-items-center","text-center"],[1,"col-md-12"],[1,"card-body"],["src","assets/images/web.png","alt","logo",1,"img-fluid","mb-4"],[1,"mb-3","f-w-400"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"feather","icon-user"],["type","text","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1","name","username",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"input-group","mb-4"],["id","basic-addon3",1,"input-group-text"],[1,"feather","icon-lock"],["type","password","placeholder","Password","aria-label","Password","aria-describedby","basic-addon3","name","password",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"d-grid"],[1,"btn","btn-block","btn-primary","mb-4",3,"click","disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"alert","alert-danger"]],template:function(a,r){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.nrm(6,"img",6),e.j41(7,"h4",7),e.EFF(8,"Login"),e.k0s(),e.j41(9,"div",8)(10,"span",9),e.nrm(11,"i",10),e.k0s(),e.j41(12,"input",11),e.mxI("ngModelChange",function(o){return e.DH7(r.usern,o)||(r.usern=o),o}),e.k0s()(),e.j41(13,"div",12)(14,"span",13),e.nrm(15,"i",14),e.k0s(),e.j41(16,"input",15),e.mxI("ngModelChange",function(o){return e.DH7(r.passw,o)||(r.passw=o),o}),e.k0s()(),e.j41(17,"div",16)(18,"button",17),e.bIt("click",function(){return r.onLogin()}),e.DNE(19,I,1,0,"span",18)(20,k,2,0,"span",19),e.k0s()(),e.DNE(21,w,2,1,"div",20),e.k0s()()()()()()),2&a&&(e.R7$(12),e.R50("ngModel",r.usern),e.Y8G("disabled",r.loading),e.R7$(4),e.R50("ngModel",r.passw),e.Y8G("disabled",r.loading),e.R7$(2),e.Y8G("disabled",r.loading),e.R7$(),e.Y8G("ngIf",r.loading),e.R7$(),e.Y8G("ngIf",!r.loading),e.R7$(),e.Y8G("ngIf",r.errorMessage))},dependencies:[m.G,v.bT,g.me,g.BC,g.vS]})}return t})()}}]);