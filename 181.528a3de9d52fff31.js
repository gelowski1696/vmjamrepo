"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[181],{7181:(b,d,i)=>{i.r(d),i.d(d,{default:()=>P});var p=i(2389),t=i(3953),_=i(6028),g=i(177),a=i(4341),h=i(3413);function f(n,s){1&n&&(t.j41(0,"div",12)(1,"div",13)(2,"p"),t.EFF(3,"Loading..."),t.k0s()()())}function y(n,s){if(1&n){const e=t.RV6();t.j41(0,"span",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.onCategoryChange(o.category))}),t.EFF(1),t.k0s()}if(2&n){const e=s.$implicit,r=t.XpG();t.AVh("active",e.category===r.selectedCategory),t.R7$(),t.SpI(" ",e.category," ")}}function m(n,s){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s()()),2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.date),t.R7$(2),t.JRh(e.itemcode),t.R7$(2),t.JRh(e.itemdesc),t.R7$(2),t.JRh(e.fillqty),t.R7$(2),t.JRh(e.emptyqty),t.R7$(2),t.JRh(e.whfillqty),t.R7$(2),t.JRh(e.whemptyqty)}}function u(n,s){1&n&&(t.j41(0,"tr")(1,"td",22),t.EFF(2,"No items available"),t.k0s()())}function C(n,s){if(1&n&&(t.j41(0,"div",15)(1,"table",16)(2,"thead")(3,"tr",17),t.nrm(4,"th")(5,"th")(6,"th"),t.j41(7,"th",18),t.EFF(8,"STORE"),t.k0s(),t.j41(9,"th",19),t.EFF(10,"WAREHOUSE"),t.k0s()(),t.j41(11,"tr",17)(12,"th"),t.EFF(13,"Date"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Item Code"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Item Name"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Fill Quantity"),t.k0s(),t.j41(20,"th"),t.EFF(21,"Empty Quantity"),t.k0s(),t.j41(22,"th"),t.EFF(23,"Fill Quantity"),t.k0s(),t.j41(24,"th"),t.EFF(25,"Empty Quantity"),t.k0s()()(),t.j41(26,"tbody"),t.DNE(27,m,15,7,"tr",20)(28,u,3,0,"tr",21),t.k0s()()()),2&n){const e=t.XpG();t.R7$(27),t.Y8G("ngForOf",e.displayedItems),t.R7$(),t.Y8G("ngIf",0===e.displayedItems.length)}}function v(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",23)(1,"button",24),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.goToPage(o.currentPage-1))}),t.EFF(2,"Previous"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.j41(5,"button",24),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.goToPage(o.currentPage+1))}),t.EFF(6,"Next"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(),t.Y8G("disabled",1===e.currentPage),t.R7$(3),t.Lme("Page ",e.currentPage," of ",e.totalPages,""),t.R7$(),t.Y8G("disabled",e.currentPage===e.totalPages)}}let P=(()=>{class n{constructor(e){this.inventoryService=e,this.inventoryItems=[],this.displayedItems=[],this.filteredItems=[],this.categories=[],this.selectedCategory="",this.filterDate="",this.loading=!1,this.currentPage=1,this.pageSize=10,this.totalPages=1,this.searchTerm="",this.searchCriteria="itemname"}ngOnInit(){this.filterDate=(new Date).toISOString().substring(0,10),this.fetchCategories()}fetchCategories(){this.inventoryService.getCategories().subscribe(e=>{this.categories=e},e=>{console.error("Error fetching categories:",e)})}fetchInventory(e=this.currentPage){this.selectedCategory&&(this.loading=!0,this.inventoryService.getInventoryCount(this.selectedCategory,e,this.pageSize).subscribe(r=>{this.inventoryItems=r,this.applyFilters(),this.loading=!1},r=>{this.loading=!1,console.error("Error fetching inventory:",r)}))}applyFilters(){this.filteredItems=this.inventoryItems,this.filterDate&&(this.filteredItems=this.filteredItems.filter(e=>e.date===this.filterDate)),this.totalPages=Math.ceil(this.filteredItems.length/this.pageSize),this.updateDisplayedItems()}updateDisplayedItems(){const e=(this.currentPage-1)*this.pageSize;this.displayedItems=this.filteredItems.slice(e,e+this.pageSize)}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.updateDisplayedItems())}onCategoryChange(e){this.selectedCategory=e,this.currentPage=1,this.fetchInventory()}onDateChange(){this.currentPage=1,this.applyFilters()}static#t=this.\u0275fac=function(r){return new(r||n)(t.rXU(_.T))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-inventory-report"]],standalone:!0,features:[t.aNF],decls:14,vars:6,consts:[[1,"col-xl-12"],["cardTitle","Inventory Report","blockClass","table-border-style",3,"options"],["class","loading-overlay",4,"ngIf"],[1,"date-filter"],["for","filterDate"],["type","date","id","filterDate",3,"ngModelChange","change","ngModel"],[1,"category-selector"],["for","category"],[1,"category-list"],[3,"active","click",4,"ngFor","ngForOf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],[1,"loading-overlay"],[1,"loading-spinner"],[3,"click"],[1,"table-responsive"],[1,"table","table-styling"],[1,"table-primary"],["colspan","2",1,"store-header"],["colspan","2",1,"warehouse-header"],[4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","7",1,"text-center"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"btn","btn-dark",3,"click","disabled"]],template:function(r,o){1&r&&(t.j41(0,"div",0)(1,"app-card",1),t.DNE(2,f,4,0,"div",2),t.j41(3,"div",3)(4,"label",4),t.EFF(5,"Select Date:"),t.k0s(),t.j41(6,"input",5),t.mxI("ngModelChange",function(c){return t.DH7(o.filterDate,c)||(o.filterDate=c),c}),t.bIt("change",function(){return o.onDateChange()}),t.k0s()(),t.j41(7,"div",6)(8,"label",7),t.EFF(9,"Select Category:"),t.k0s(),t.j41(10,"div",8),t.DNE(11,y,2,3,"span",9),t.k0s()(),t.DNE(12,C,29,2,"div",10)(13,v,7,4,"div",11),t.k0s()()),2&r&&(t.R7$(),t.Y8G("options",!1),t.R7$(),t.Y8G("ngIf",o.loading),t.R7$(4),t.R50("ngModel",o.filterDate),t.R7$(5),t.Y8G("ngForOf",o.categories),t.R7$(),t.Y8G("ngIf",!o.loading),t.R7$(),t.Y8G("ngIf",!o.loading&&o.displayedItems.length>0))},dependencies:[p.G,g.Sq,g.bT,a.me,a.BC,a.vS,h.i],styles:[".date-filter[_ngcontent-%COMP%]{position:relative}.date-filter[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:1rem;font-weight:700}.date-filter[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;padding:.2rem 2rem .2rem .75rem;font-size:1rem;width:200px;background-color:#f9f9f9;transition:border-color .3s ease}.date-filter[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.formatted-date[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;color:#333}.category-selector[_ngcontent-%COMP%]{margin-bottom:15px}.category-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.category-list[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:10px 0;white-space:nowrap}.category-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;padding:8px 15px;border:1px solid #ddd;border-radius:4px;cursor:pointer;white-space:nowrap}.category-list[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.table-styling[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-primary[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#333}.store-header[_ngcontent-%COMP%]{background-color:#d1e7dd;text-align:center}.warehouse-header[_ngcontent-%COMP%]{background-color:#fff7d1;text-align:center}.table-styling[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-styling[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:center;border:1px solid #dee2e6}.table-styling[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6}.table-styling[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center}.loading-spinner[_ngcontent-%COMP%]{padding:20px;border-radius:8px;background:#fff}"]})}return n})()}}]);