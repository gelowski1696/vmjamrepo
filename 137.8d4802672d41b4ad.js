"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[137],{7137:(E,r,l)=>{l.r(r),l.d(r,{default:()=>b});var d=l(2389),e=l(3953),g=l(6028),_=l(3525),a=l(177),h=l(3413);const m=["itemDetailModal"];function p(s,o){1&s&&(e.j41(0,"div",10)(1,"div",11)(2,"p"),e.EFF(3,"Loading..."),e.k0s()()())}function u(s,o){if(1&s){const t=e.RV6();e.j41(0,"span",12),e.bIt("click",function(){const i=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onCategoryChange(i.category))}),e.EFF(1),e.k0s()}if(2&s){const t=o.$implicit,n=e.XpG();e.AVh("active",t.category===n.selectedCategory),e.R7$(),e.SpI(" ",t.category," ")}}function f(s,o){if(1&s){const t=e.RV6();e.j41(0,"tr",12),e.bIt("click",function(){const i=e.eBV(t),c=i.$implicit,I=i.index,C=e.XpG(2);return e.Njj(C.openItemDetailModal(c,I))}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s()()}if(2&s){const t=o.$implicit,n=o.index,i=e.XpG(2);e.AVh("selected",n===i.clickedRowIndex)("critical",t.whfill<=t.icount&&t.icount>0),e.R7$(2),e.JRh(t.itemcode),e.R7$(2),e.JRh(t.itemname),e.R7$(2),e.JRh(t.itemsize),e.R7$(2),e.JRh(t.whfill),e.R7$(2),e.JRh(t.whempty),e.R7$(2),e.JRh(t.whdispose),e.R7$(2),e.JRh(t.fillqty+t.emptyqty+t.whfill+t.whempty)}}function y(s,o){1&s&&(e.j41(0,"tr")(1,"td",18),e.EFF(2,"No items available"),e.k0s()())}function v(s,o){if(1&s&&(e.j41(0,"div",13)(1,"table",14)(2,"thead")(3,"tr",15)(4,"th"),e.EFF(5,"Item Code"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Description"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Item Size"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Fill Quantity"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Empty Quantity"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Disposed"),e.k0s(),e.j41(16,"th"),e.EFF(17,"Overall Stocks"),e.k0s()()(),e.j41(18,"tbody"),e.DNE(19,f,15,11,"tr",16)(20,y,3,0,"tr",17),e.k0s()()()),2&s){const t=e.XpG();e.R7$(19),e.Y8G("ngForOf",t.displayedItems),e.R7$(),e.Y8G("ngIf",0===t.displayedItems.length)}}function F(s,o){if(1&s){const t=e.RV6();e.j41(0,"div",19)(1,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToPage(i.currentPage-1))}),e.EFF(2,"Previous"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"button",20),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToPage(i.currentPage+1))}),e.EFF(6,"Next"),e.k0s()()}if(2&s){const t=e.XpG();e.R7$(),e.Y8G("disabled",1===t.currentPage),e.R7$(3),e.Lme("Page ",t.currentPage," of ",t.totalPages,""),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}function k(s,o){if(1&s){const t=e.RV6();e.j41(0,"div",21)(1,"h4",22),e.EFF(2,"Item Details"),e.k0s(),e.j41(3,"button",23),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.dismiss("Cross click"))}),e.k0s()(),e.j41(4,"div",24)(5,"div",25)(6,"div",26)(7,"strong"),e.EFF(8,"Item Code:"),e.k0s()(),e.j41(9,"div",27),e.EFF(10),e.k0s()(),e.j41(11,"div",25)(12,"div",26)(13,"strong"),e.EFF(14,"Description:"),e.k0s()(),e.j41(15,"div",27),e.EFF(16),e.k0s()(),e.j41(17,"div",25)(18,"div",26)(19,"strong"),e.EFF(20,"Item Size:"),e.k0s()(),e.j41(21,"div",27),e.EFF(22),e.k0s()(),e.j41(23,"div",25)(24,"div",26)(25,"strong"),e.EFF(26,"Fill Quantity:"),e.k0s()(),e.j41(27,"div",27),e.EFF(28),e.k0s()(),e.j41(29,"div",25)(30,"div",26)(31,"strong"),e.EFF(32,"Empty Quantity:"),e.k0s()(),e.j41(33,"div",27),e.EFF(34),e.k0s()(),e.j41(35,"div",25)(36,"div",26)(37,"strong"),e.EFF(38,"Total Quantity:"),e.k0s()(),e.j41(39,"div",27),e.EFF(40),e.k0s()(),e.j41(41,"div",25)(42,"div",26)(43,"strong"),e.EFF(44,"Critical Level:"),e.k0s()(),e.j41(45,"div",27),e.EFF(46),e.k0s()(),e.j41(47,"div",25)(48,"div",26)(49,"strong"),e.EFF(50,"Date Created:"),e.k0s()(),e.j41(51,"div",27),e.EFF(52),e.k0s()()()}if(2&s){const t=e.XpG();e.R7$(10),e.JRh(null==t.selectedItem?null:t.selectedItem.itemcode),e.R7$(6),e.JRh(null==t.selectedItem?null:t.selectedItem.itemname),e.R7$(6),e.JRh(null==t.selectedItem?null:t.selectedItem.itemsize),e.R7$(6),e.JRh(null==t.selectedItem?null:t.selectedItem.whfill),e.R7$(6),e.JRh(null==t.selectedItem?null:t.selectedItem.whempty),e.R7$(6),e.JRh(((null==t.selectedItem?null:t.selectedItem.whfill)||0)+((null==t.selectedItem?null:t.selectedItem.whempty)||0)),e.R7$(6),e.JRh(null==t.selectedItem?null:t.selectedItem.icount),e.R7$(6),e.JRh(null==t.selectedItem?null:t.selectedItem.itemdate)}}let b=(()=>{class s{constructor(t,n){this.inventoryService=t,this.modalService=n,this.inventoryItems=[],this.displayedItems=[],this.filteredItems=[],this.categories=[],this.selectedCategory="",this.loading=!1,this.currentPage=1,this.pageSize=10,this.totalPages=1,this.searchTerm="",this.searchCriteria="itemname",this.selectedItem=null,this.clickedRowIndex=null}ngOnInit(){this.fetchCategories()}fetchCategories(){this.inventoryService.getCategories().subscribe(t=>{this.categories=t},t=>{console.error("Error fetching categories:",t)})}fetchInventory(t=this.currentPage){this.selectedCategory&&(this.loading=!0,this.inventoryService.getInventoryWHByCategory(this.selectedCategory,t,this.pageSize).subscribe(n=>{this.inventoryItems=n,console.log(this.inventoryItems),this.filteredItems=this.inventoryItems,this.totalPages=Math.ceil(this.filteredItems.length/this.pageSize),this.updateDisplayedItems(),this.loading=!1},n=>{this.loading=!1,console.error("Error fetching inventory:",n)}))}updateDisplayedItems(){const t=(this.currentPage-1)*this.pageSize;this.displayedItems=this.filteredItems.slice(t,t+this.pageSize)}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.updateDisplayedItems())}onCategoryChange(t){this.selectedCategory=t,this.currentPage=1,this.fetchInventory()}openItemDetailModal(t,n){console.log(t),this.selectedItem=t,this.clickedRowIndex=n,this.modalService.open(this.itemDetailModal,{centered:!0}).result.then(()=>this.resetSelection(),()=>this.resetSelection())}resetSelection(){this.clickedRowIndex=null}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(g.T),e.rXU(_.Bq))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-warehouse"]],viewQuery:function(n,i){if(1&n&&e.GBs(m,5),2&n){let c;e.mGM(c=e.lsd())&&(i.itemDetailModal=c.first)}},standalone:!0,features:[e.aNF],decls:12,vars:5,consts:[["itemDetailModal",""],[1,"col-xl-12"],["cardTitle","Warehouse Items","blockClass","table-border-style",3,"options"],["class","loading-overlay",4,"ngIf"],[1,"category-selector"],["for","category"],[1,"category-list"],[3,"active","click",4,"ngFor","ngForOf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],[1,"loading-overlay"],[1,"loading-spinner"],[3,"click"],[1,"table-responsive"],[1,"table","table-styling"],[1,"table-primary"],[3,"selected","critical","click",4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","11",1,"text-center"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"btn","btn-dark",3,"click","disabled"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","mb-2"],[1,"col-6","text-end"],[1,"col-6"]],template:function(n,i){1&n&&(e.j41(0,"div",1)(1,"app-card",2),e.DNE(2,p,4,0,"div",3),e.j41(3,"div",4)(4,"label",5),e.EFF(5,"Select Category:"),e.k0s(),e.j41(6,"div",6),e.DNE(7,u,2,3,"span",7),e.k0s()(),e.DNE(8,v,21,2,"div",8)(9,F,7,4,"div",9),e.k0s()(),e.DNE(10,k,53,8,"ng-template",null,0,e.C5r)),2&n&&(e.R7$(),e.Y8G("options",!1),e.R7$(),e.Y8G("ngIf",i.loading),e.R7$(5),e.Y8G("ngForOf",i.categories),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",!i.loading&&i.displayedItems.length>0))},dependencies:[d.G,a.Sq,a.bT,h.i],styles:[".table-styling[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-styling[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s}.table-styling[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.table-styling[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d8eef1f4;cursor:pointer}.table-styling[_ngcontent-%COMP%]   tr.critical[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center}.loading-spinner[_ngcontent-%COMP%]{padding:20px;border-radius:8px;background:#fff}.category-selector[_ngcontent-%COMP%]{margin-bottom:15px}.category-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.category-list[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:10px 0;white-space:nowrap}.category-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 5px;padding:8px 15px;border:1px solid #ddd;border-radius:4px;cursor:pointer;white-space:nowrap}.category-list[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.category-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;height:11px}.category-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.category-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:6px}.category-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media (max-width: 768px){.category-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}}"]})}return s})()}}]);