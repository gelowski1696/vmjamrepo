"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[977],{7977:(w,h,o)=>{o.r(h),o.d(h,{default:()=>V});var m=o(177),u=o(2389),e=o(3953),p=o(7004),g=o(3525),F=o(2525),_=o(1626);let f=(()=>{class n{constructor(t){this.http=t,this.apiUrl=`${F.c.apiUrl}/api`,this.db=localStorage.getItem("devID")||""}getCreditHistory(t){return this.http.get(`${this.apiUrl}/getCreditHistory`,{params:{db:this.db,refnum:t}})}static#e=this.\u0275fac=function(l){return new(l||n)(e.KVO(_.Qq))};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j=o(2646),d=o(4341),k=o(3413);const I=["salesCartModal"],b=["notesModal"],C=["creditHistoryModal"];function R(n,a){1&n&&(e.j41(0,"div",16)(1,"div",17)(2,"p"),e.EFF(3,"Loading..."),e.k0s()()())}function v(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"label",20),e.EFF(3,"Start Date:"),e.k0s(),e.j41(4,"input",21),e.mxI("ngModelChange",function(s){e.eBV(t);const i=e.XpG();return e.DH7(i.startDate,s)||(i.startDate=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.searchSales())}),e.k0s()(),e.j41(5,"div",19)(6,"label",22),e.EFF(7,"End Date:"),e.k0s(),e.j41(8,"input",23),e.mxI("ngModelChange",function(s){e.eBV(t);const i=e.XpG();return e.DH7(i.endDate,s)||(i.endDate=s),e.Njj(s)}),e.bIt("change",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.searchSales())}),e.k0s()(),e.j41(9,"div",24)(10,"button",25),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.showAllSales())}),e.EFF(11,"Show All"),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.startDate),e.R7$(4),e.R50("ngModel",t.endDate)}}function E(n,a){1&n&&(e.j41(0,"div",16)(1,"div",17)(2,"p"),e.EFF(3,"Loading..."),e.k0s()()())}function S(n,a){1&n&&(e.j41(0,"tr")(1,"td",32),e.EFF(2,"No Sales available"),e.k0s()())}function y(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",33),e.bIt("click",function(){const s=e.eBV(t),i=s.$implicit,c=s.index,r=e.XpG(2);return e.Njj(r.openDetailsModal(i,c))}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.nI1(13,"currency"),e.k0s(),e.j41(14,"td"),e.EFF(15),e.nI1(16,"currency"),e.k0s(),e.j41(17,"td"),e.EFF(18),e.nI1(19,"currency"),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s()()}if(2&n){const t=a.$implicit,l=a.index,s=e.XpG(2);e.AVh("selected",l===s.clickedRowIndex),e.R7$(2),e.JRh(s.formatDate(t.salesdate)),e.R7$(2),e.JRh(t.salesrefnum),e.R7$(2),e.JRh(t.salescust),e.R7$(2),e.JRh(t.salescat),e.R7$(2),e.JRh(t.salestotalitem),e.R7$(2),e.JRh(e.brH(13,14,t.salesdisc,"PHP",!0)),e.R7$(3),e.JRh(e.brH(16,18,t.specialdisc,"PHP",!0)),e.R7$(3),e.JRh(e.brH(19,22,t.salestotalamount+t.salesdisc+t.specialdisc,"PHP",!0)),e.R7$(3),e.JRh(t.salespaym),e.R7$(2),e.JRh(t.salestatus),e.R7$(2),e.Lme("",t.salesdelby," | ",t.salesdelby2," ")}}function P(n,a){if(1&n&&(e.j41(0,"div",26)(1,"table",27)(2,"thead")(3,"tr",28)(4,"th"),e.EFF(5,"Date"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Reference Number"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Customer"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Category"),e.k0s(),e.j41(12,"th"),e.EFF(13,"Qty"),e.k0s(),e.j41(14,"th"),e.EFF(15,"Discount"),e.k0s(),e.j41(16,"th"),e.EFF(17,"S. Discount"),e.k0s(),e.j41(18,"th"),e.EFF(19,"Total Amount"),e.k0s(),e.j41(20,"th"),e.EFF(21,"Pay Method"),e.k0s(),e.j41(22,"th"),e.EFF(23,"Remarks"),e.k0s(),e.j41(24,"th"),e.EFF(25,"Personel"),e.k0s()()(),e.j41(26,"tbody"),e.DNE(27,S,3,0,"tr",29)(28,y,26,26,"tr",30),e.k0s(),e.j41(29,"tfoot")(30,"tr",28)(31,"td",31)(32,"strong"),e.EFF(33,"Total Sales :"),e.k0s()(),e.j41(34,"td"),e.EFF(35),e.nI1(36,"currency"),e.k0s()()()()()),2&n){const t=e.XpG();e.R7$(27),e.Y8G("ngIf",0===t.displayedSales.length),e.R7$(),e.Y8G("ngForOf",t.displayedSales),e.R7$(7),e.JRh(e.i5U(36,3,t.getTotalsales(),"PHP"))}}function x(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",34)(1,"button",35),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.goToPage(s.currentPage-1))}),e.EFF(2,"Previous"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"button",35),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.goToPage(s.currentPage+1))}),e.EFF(6,"Next"),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("disabled",1===t.currentPage),e.R7$(3),e.Lme("Page ",t.currentPage," of ",t.totalPages,""),e.R7$(),e.Y8G("disabled",t.currentPage===t.totalPages)}}function M(n,a){1&n&&(e.j41(0,"tr")(1,"td",52),e.EFF(2,"No Items"),e.k0s()())}function D(n,a){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"currency"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"currency"),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s()()),2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.scitemcode),e.R7$(2),e.JRh(t.scitemdesc),e.R7$(2),e.JRh(t.scqty),e.R7$(2),e.JRh(e.i5U(9,6,t.scprice,"PHP")),e.R7$(3),e.JRh(e.i5U(12,9,t.sctotal,"PHP")),e.R7$(3),e.JRh(t.scunit)}}function $(n,a){if(1&n&&(e.j41(0,"tr",28)(1,"td",45),e.EFF(2,"Special Discount :"),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(4),e.JRh(e.i5U(5,1,null==t.selectedItem?null:t.selectedItem.specialdisc,"PHP"))}}function T(n,a){if(1&n&&(e.j41(0,"div")(1,"strong"),e.EFF(2,"Balance :"),e.k0s(),e.EFF(3),e.nI1(4,"currency"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.i5U(4,1,null==t.selectedItem?null:t.selectedItem.tenderbalance,"PHP")," ")}}function H(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"h4",38),e.EFF(3,"Details"),e.k0s(),e.j41(4,"button",39),e.bIt("click",function(){const s=e.eBV(t).$implicit;return e.Njj(s.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",40)(6,"div",41)(7,"div",42)(8,"strong"),e.EFF(9,"Reference Number :"),e.k0s()(),e.j41(10,"div",42),e.EFF(11),e.k0s(),e.j41(12,"div",42)(13,"strong"),e.EFF(14,"Cashier :"),e.k0s()(),e.j41(15,"div",42),e.EFF(16),e.k0s()(),e.j41(17,"div",41)(18,"div",42)(19,"strong"),e.EFF(20,"Total Items :"),e.k0s()(),e.j41(21,"div",42),e.EFF(22),e.k0s(),e.j41(23,"div",42)(24,"strong"),e.EFF(25,"Date :"),e.k0s()(),e.j41(26,"div",42),e.EFF(27),e.k0s()(),e.j41(28,"div",41)(29,"div",42)(30,"strong"),e.EFF(31,"Tendered Amount :"),e.k0s()(),e.j41(32,"div",42),e.EFF(33),e.nI1(34,"currency"),e.k0s(),e.j41(35,"div",42)(36,"strong"),e.EFF(37,"Change :"),e.k0s()(),e.j41(38,"div",42),e.EFF(39),e.nI1(40,"currency"),e.k0s()(),e.j41(41,"div",41)(42,"div",42)(43,"strong"),e.EFF(44,"Payment Method :"),e.k0s()(),e.j41(45,"div",42),e.EFF(46),e.k0s(),e.j41(47,"div",42)(48,"strong"),e.EFF(49,"Customer :"),e.k0s()(),e.j41(50,"div",42),e.EFF(51),e.k0s()(),e.j41(52,"div",41)(53,"div",42)(54,"strong"),e.EFF(55,"Customer Address :"),e.k0s()(),e.j41(56,"div",42),e.EFF(57),e.k0s(),e.j41(58,"div",42)(59,"strong"),e.EFF(60,"Category :"),e.k0s()(),e.j41(61,"div",42),e.EFF(62),e.k0s()(),e.j41(63,"div",41)(64,"div",42)(65,"strong"),e.EFF(66,"Personel :"),e.k0s()(),e.j41(67,"div",42),e.EFF(68),e.k0s()(),e.j41(69,"app-card",43)(70,"div",26)(71,"table",27)(72,"thead")(73,"tr",28)(74,"th"),e.EFF(75,"Itemcode"),e.k0s(),e.j41(76,"th"),e.EFF(77,"Description"),e.k0s(),e.j41(78,"th"),e.EFF(79,"Quantity"),e.k0s(),e.j41(80,"th"),e.EFF(81,"Unit Price"),e.k0s(),e.j41(82,"th"),e.EFF(83,"Amount"),e.k0s(),e.j41(84,"th"),e.EFF(85,"Unit"),e.k0s()()(),e.j41(86,"tbody"),e.DNE(87,M,3,0,"tr",29)(88,D,15,12,"tr",44),e.k0s(),e.j41(89,"tfoot")(90,"tr",28)(91,"td",45),e.EFF(92,"Sub Total :"),e.k0s(),e.j41(93,"td"),e.EFF(94),e.nI1(95,"currency"),e.k0s()(),e.j41(96,"tr",28)(97,"td",45),e.EFF(98,"VAT :"),e.k0s(),e.j41(99,"td"),e.EFF(100),e.nI1(101,"currency"),e.k0s()(),e.DNE(102,$,6,4,"tr",46),e.j41(103,"tr",28)(104,"td",45),e.EFF(105,"Discount :"),e.k0s(),e.j41(106,"td"),e.EFF(107),e.nI1(108,"currency"),e.k0s()(),e.j41(109,"tr",28)(110,"td",45)(111,"strong"),e.EFF(112,"GRAND TOTAL :"),e.k0s()(),e.j41(113,"td")(114,"strong"),e.EFF(115),e.nI1(116,"currency"),e.k0s()()()()()()(),e.j41(117,"div",47)(118,"div",48),e.DNE(119,T,5,4,"div",29),e.j41(120,"div",49)(121,"button",50),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.ViewNotes())}),e.EFF(122,"Notes"),e.k0s(),e.j41(123,"button",51),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.openCreditHistory())}),e.EFF(124,"Credit History"),e.k0s()()()()()()}if(2&n){const t=e.XpG();e.R7$(11),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salesrefnum," "),e.R7$(5),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salescashier," "),e.R7$(6),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salestotalitem," "),e.R7$(5),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salesdate," "),e.R7$(6),e.SpI(" ",e.i5U(34,21,null==t.selectedItem?null:t.selectedItem.salestender,"PHP")," "),e.R7$(6),e.SpI(" ",e.i5U(40,24,null==t.selectedItem?null:t.selectedItem.saleschange,"PHP")," "),e.R7$(7),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salespaym," "),e.R7$(5),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salescust," "),e.R7$(6),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.custadd," "),e.R7$(5),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salescat," "),e.R7$(6),e.Lme(" ",null==t.selectedItem?null:t.selectedItem.salesdelby," | ",null==t.selectedItem?null:t.selectedItem.salesdelby2," "),e.R7$(),e.Y8G("options",!1),e.R7$(18),e.Y8G("ngIf",0===t.salesitems.length),e.R7$(),e.Y8G("ngForOf",t.salesitems),e.R7$(6),e.JRh(e.i5U(95,27,null==t.selectedItem?null:t.selectedItem.salessub,"PHP")),e.R7$(6),e.JRh(e.i5U(101,30,null==t.selectedItem?null:t.selectedItem.salesvat,"PHP")),e.R7$(2),e.Y8G("ngIf",(null==t.selectedItem?null:t.selectedItem.specialdisc)>0),e.R7$(5),e.JRh(e.i5U(108,33,null==t.selectedItem?null:t.selectedItem.salesdisc,"PHP")),e.R7$(8),e.JRh(e.i5U(116,36,null==t.selectedItem?null:t.selectedItem.salestotalamount,"PHP")),e.R7$(4),e.Y8G("ngIf",(null==t.selectedItem?null:t.selectedItem.tenderbalance)>0)}}function O(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"h4",38),e.EFF(3,"Notes"),e.k0s(),e.j41(4,"button",39),e.bIt("click",function(){const s=e.eBV(t).$implicit;return e.Njj(s.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",40),e.nrm(6,"div",53),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(6),e.Y8G("innerHTML",null==t.selectedItem?null:t.selectedItem.salesremarks,e.npT)}}function G(n,a){1&n&&(e.j41(0,"tr")(1,"td",55),e.EFF(2,"No Credit History"),e.k0s()())}function N(n,a){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"currency"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"currency"),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s()()),2&n){const t=a.$implicit,l=e.XpG(2);e.R7$(2),e.JRh(l.formatDate(t.cppaydate)),e.R7$(2),e.JRh(e.i5U(5,5,t.cpbalance,"PHP")),e.R7$(3),e.JRh(e.i5U(8,8,t.cppay,"PHP")),e.R7$(3),e.JRh(t.cppaymethod),e.R7$(2),e.JRh(t.cpcashier)}}function J(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",36)(1,"div",37)(2,"h4",38),e.EFF(3,"Credit History"),e.k0s(),e.j41(4,"button",39),e.bIt("click",function(){const s=e.eBV(t).$implicit;return e.Njj(s.dismiss("Cross click"))}),e.k0s()(),e.j41(5,"div",40)(6,"div",41)(7,"div",42)(8,"strong"),e.EFF(9,"Reference Number :"),e.k0s()(),e.j41(10,"div",42),e.EFF(11),e.k0s(),e.j41(12,"div",42)(13,"strong"),e.EFF(14,"Date :"),e.k0s()(),e.j41(15,"div",42),e.EFF(16),e.k0s()(),e.j41(17,"div",41)(18,"div",42)(19,"strong"),e.EFF(20,"Customer Name : :"),e.k0s()(),e.j41(21,"div",42),e.EFF(22),e.k0s()(),e.j41(23,"div",26)(24,"table",27)(25,"thead")(26,"tr",28)(27,"th"),e.EFF(28,"Date"),e.k0s(),e.j41(29,"th"),e.EFF(30,"Balance"),e.k0s(),e.j41(31,"th"),e.EFF(32,"Paid"),e.k0s(),e.j41(33,"th"),e.EFF(34,"Payment Method"),e.k0s(),e.j41(35,"th"),e.EFF(36,"Cashier"),e.k0s()()(),e.j41(37,"tbody"),e.DNE(38,G,3,0,"tr",29)(39,N,13,11,"tr",44),e.k0s(),e.j41(40,"tfoot")(41,"tr",28)(42,"td",54)(43,"strong"),e.EFF(44,"Total Paid :"),e.k0s()(),e.j41(45,"td"),e.EFF(46),e.nI1(47,"currency"),e.k0s()(),e.j41(48,"tr",28)(49,"td",54)(50,"strong"),e.EFF(51,"Total Balance :"),e.k0s()(),e.j41(52,"td"),e.EFF(53),e.nI1(54,"currency"),e.k0s()()()()()()()}if(2&n){const t=e.XpG();e.R7$(11),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salesrefnum," "),e.R7$(5),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salesdate," "),e.R7$(6),e.SpI(" ",null==t.selectedItem?null:t.selectedItem.salescust," "),e.R7$(16),e.Y8G("ngIf",0===t.creditHistory.length),e.R7$(),e.Y8G("ngForOf",t.creditHistory),e.R7$(7),e.JRh(e.i5U(47,7,t.getTotalPaid(),"PHP")),e.R7$(7),e.JRh(e.i5U(54,10,null==t.selectedItem?null:t.selectedItem.tenderbalance,"PHP"))}}let V=(()=>{class n{constructor(t,l,s,i,c){this.salesService=t,this.modalService=l,this.creditService=s,this.salescCartService=i,this.datePipe=c,this.sales=[],this.displayedSales=[],this.filteredSales=[],this.loading=!1,this.currentPage=1,this.pageSize=10,this.totalPages=1,this.searchTerm="",this.searchCriteria="salesrefnum",this.clickedRowIndex=null,this.selectedItem=null,this.modalRef=null,this.startDate="",this.endDate="",this.noSales=!1,this.salesitems=[],this.creditHistory=[]}ngOnInit(){this.loadSales().then(()=>{const t=new Date;this.startDate=this.formatDate(t),this.endDate=this.formatDate(t),this.searchSales()})}formatDate(t){return this.datePipe.transform(t,"yyyy-MM-dd")||""}loadSales(){return this.loading=!0,new Promise((t,l)=>{this.salesService.getSales().subscribe(s=>{this.sales=s,this.filteredSales=this.sales.filter(i=>this.formatDate(i.salesdate)===this.formatDate(new Date)),this.totalPages=Math.ceil(this.filteredSales.length/this.pageSize),this.noSales=0===this.filteredSales.length,this.updateDisplayedSales(),this.loading=!1,t()},s=>{this.loading=!1,this.noSales=!0,console.error("Error fetching sales",s),l(s)})})}updateDisplayedSales(){const t=(this.currentPage-1)*this.pageSize;this.displayedSales=this.filteredSales.slice(t,t+this.pageSize)}goToPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.updateDisplayedSales())}searchSales(){this.filteredSales=this.sales.filter(t=>{const l=t[this.searchCriteria]?.toLowerCase().includes(this.searchTerm.toLowerCase()),s=!this.startDate||new Date(t.salesdate)>=new Date(this.startDate),i=!this.endDate||new Date(t.salesdate)<=new Date(this.endDate);return l&&s&&i}),this.totalPages=Math.ceil(this.filteredSales.length/this.pageSize),this.currentPage=1,this.updateDisplayedSales()}showAllSales(){this.loading=!0,this.salesService.getSales().subscribe(t=>{this.sales=t,this.filteredSales=this.sales,this.totalPages=Math.ceil(this.filteredSales.length/this.pageSize),this.updateDisplayedSales(),this.loading=!1,this.startDate="",this.endDate=""},t=>{this.loading=!1,console.error("Error fetching sales",t)})}getTotalsales(){return this.filteredSales.filter(t=>"PAID"===t.salestatus).reduce((t,l)=>t+l.salestotalamount+l.salesdisc+l.specialdisc,0)}openDetailsModal(t,l){this.selectedItem=t,this.clickedRowIndex=l,this.fetchSalesItems(),this.modalRef=this.modalService.open(this.salesCartModal,{centered:!0,size:"lg"}),this.modalRef.result.finally(()=>this.resetSelection())}resetSelection(){this.clickedRowIndex=null,this.selectedItem=null}fetchSalesItems(){this.selectedItem&&this.salescCartService.getSalesItems(this.selectedItem.salesrefnum??"").subscribe(t=>{this.salesitems=t},t=>{console.error("Error fetching Sales items:",t)})}ViewNotes(){this.modalRef=this.modalService.open(this.notesModal,{centered:!0}),this.modalRef.result.finally(()=>null)}openCreditHistory(){this.fetchCreditHistory(),this.modalRef=this.modalService.open(this.creditHistoryModal,{centered:!0,size:"lg"}),this.modalRef.result.finally(()=>null)}fetchCreditHistory(){this.selectedItem&&this.creditService.getCreditHistory(this.selectedItem.salesrefnum??"").subscribe(t=>{this.creditHistory=t},t=>{console.error("Error fetching Credit History:",t)})}getTotalPaid(){return this.creditHistory.reduce((t,l)=>t+l.cppay,0)}static#e=this.\u0275fac=function(l){return new(l||n)(e.rXU(p.j),e.rXU(g.Bq),e.rXU(f),e.rXU(j.J),e.rXU(m.vh))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-sales"]],viewQuery:function(l,s){if(1&l&&(e.GBs(I,5),e.GBs(b,5),e.GBs(C,5)),2&l){let i;e.mGM(i=e.lsd())&&(s.salesCartModal=i.first),e.mGM(i=e.lsd())&&(s.notesModal=i.first),e.mGM(i=e.lsd())&&(s.creditHistoryModal=i.first)}},standalone:!0,features:[e.Jv_([m.vh]),e.aNF],decls:24,vars:8,consts:[["salesCartModal",""],["notesModal",""],["creditHistoryModal",""],[1,"col-xl-12"],["cardTitle","Sales","blockClass","table-border-style",3,"options"],["class","loading-overlay",4,"ngIf"],["class","row mb-3 align-items-end",4,"ngIf"],[1,"search-container"],["type","text","placeholder","Search sales...",1,"form-control","search-input",3,"ngModelChange","input","ngModel"],[1,"form-control","search-criteria",3,"ngModelChange","change","ngModel"],["value","salesrefnum"],["value","salescust"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-between align-items-center mt-3",4,"ngIf"],[1,"modal-footer","justify-content-start"],[1,"btn","btn-success","mt-3"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"row","mb-3","align-items-end"],[1,"col-12","col-md-4"],["for","startDate",1,"form-label"],["type","date","id","startDate",1,"form-control",3,"ngModelChange","change","ngModel"],["for","endDate",1,"form-label"],["type","date","id","endDate",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-12","col-md-4","text-end"],[1,"btn","btn-secondary","mt-3","mt-md-0",3,"click"],[1,"table-responsive"],[1,"table","table-styling"],[1,"table-primary"],[4,"ngIf"],[3,"selected","click",4,"ngFor","ngForOf"],["colspan","10",1,"text-end"],["colspan","11",1,"text-center"],[3,"click"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"btn","btn-dark",3,"click","disabled"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","mb-1"],[1,"col-6","col-md-3"],["cardTitle","Items","blockClass","table-border-style",3,"options"],[4,"ngFor","ngForOf"],["colspan","5",1,"text-end"],["class","table-primary",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-12","d-flex","justify-content-between","align-items-center"],[1,"ms-auto"],[1,"btn","btn-secondary","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"],["colspan","3",1,"text-center"],[1,"rich-text-box",3,"innerHTML"],["colspan","4",1,"text-end"],[1,"text-center"]],template:function(l,s){if(1&l){const i=e.RV6();e.j41(0,"div",3)(1,"app-card",4),e.DNE(2,R,4,0,"div",5)(3,v,12,2,"div",6),e.j41(4,"div",7)(5,"input",8),e.mxI("ngModelChange",function(r){return e.eBV(i),e.DH7(s.searchTerm,r)||(s.searchTerm=r),e.Njj(r)}),e.bIt("input",function(){return e.eBV(i),e.Njj(s.searchSales())}),e.k0s(),e.j41(6,"select",9),e.mxI("ngModelChange",function(r){return e.eBV(i),e.DH7(s.searchCriteria,r)||(s.searchCriteria=r),e.Njj(r)}),e.bIt("change",function(){return e.eBV(i),e.Njj(s.searchSales())}),e.j41(7,"option",10),e.EFF(8,"Reference No."),e.k0s(),e.j41(9,"option",11),e.EFF(10,"Customer Name"),e.k0s()()(),e.DNE(11,E,4,0,"div",5)(12,P,37,6,"div",12)(13,x,7,4,"div",13),e.j41(14,"div",14)(15,"button",15)(16,"strong"),e.EFF(17,"REPORTS"),e.k0s()()()()(),e.DNE(18,H,125,39,"ng-template",null,0,e.C5r)(20,O,7,1,"ng-template",null,1,e.C5r)(22,J,55,13,"ng-template",null,2,e.C5r)}2&l&&(e.R7$(),e.Y8G("options",!1),e.R7$(),e.Y8G("ngIf",s.loading),e.R7$(),e.Y8G("ngIf",!s.loading),e.R7$(2),e.R50("ngModel",s.searchTerm),e.R7$(),e.R50("ngModel",s.searchCriteria),e.R7$(5),e.Y8G("ngIf",s.loading),e.R7$(),e.Y8G("ngIf",!s.loading),e.R7$(),e.Y8G("ngIf",!s.loading&&s.displayedSales.length>0))},dependencies:[u.G,m.Sq,m.bT,d.xH,d.y7,d.me,d.wz,d.BC,d.vS,k.i,m.oe],styles:[".search-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.search-input[_ngcontent-%COMP%]{flex:1;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc;transition:border-color .3s;margin-right:10px}.search-input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.search-criteria[_ngcontent-%COMP%]{padding:10px 30px 10px 10px;font-size:16px;border-radius:5px;border:1px solid #ccc;transition:border-color .3s;width:auto;min-width:150px;white-space:nowrap}.search-criteria[_ngcontent-%COMP%]:focus{border-color:#b0cfee;outline:none}.table-styling[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-styling[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s}.table-styling[_ngcontent-%COMP%]   tr.selected[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.table-styling[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#d8eef1f4;cursor:pointer}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1000}.loading-spinner[_ngcontent-%COMP%]{text-align:center;font-size:16px;color:#333}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.rich-text-box[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;border-radius:5px;background-color:#f9f9f9;max-height:400px;overflow-y:auto;font-size:14px}.rich-text-box[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .rich-text-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .rich-text-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;color:#333}.rich-text-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.rich-text-box[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.rich-text-box[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-style:italic}.rich-text-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .rich-text-box[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{padding-left:20px}.rich-text-box[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.rich-text-box[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{border-left:3px solid #ccc;padding-left:10px;margin:10px 0;font-style:italic}"]})}return n})()}}]);